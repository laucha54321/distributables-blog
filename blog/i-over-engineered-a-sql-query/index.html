<!DOCTYPE html><html class="astro-UV4PCJ7L theme-newspaper"lang="en"><meta charset="utf-8"><meta content="width=device-width,initial-scale=1"name="viewport"><meta content="Blogster"name="generator"><meta content="#ffffff"name="theme-color"><link href="/favicon.ico"rel="shortcut icon"><title>I Over-Engineered a SQL Query (And Almost Didn't Stop)</title><meta content="I Over-Engineered a SQL Query (And Almost Didn't Stop)"name="title"><meta content="How a simple database comparison turned into a meta-programming nightmare—and what saved me."name="description"><style>@font-face{font-family:'SF Mono','Cascadia Code',Consolas,'Liberation Mono','Courier New',monospace;font-style:normal;font-weight:400;font-display:optional}@font-face{font-family:'SF Mono','Cascadia Code',Consolas,'Liberation Mono','Courier New',monospace;font-style:normal;font-weight:700;font-display:optional}@font-face{font-family:'SF Mono','Cascadia Code',Consolas,'Liberation Mono','Courier New',monospace;font-style:italic;font-weight:400;font-display:optional}</style><script>(()=>{var e,t;"undefined"!=typeof window&&(e=window.matchMedia("(prefers-color-scheme: dark)").matches,!(t=sessionStorage.getItem("theme"))&&e||"dark"===t?(document.documentElement.classList.add("dark"),document.head.children.namedItem("theme-color").content="#262626"):document.head.children.namedItem("theme-color").content="#ffffff")})()</script><link href="/assets/_slug_.f3ac8d20.css"rel="stylesheet"><link href="/assets/_slug_.5119e8cf.css"rel="stylesheet"><script type="module">window.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".gist-iframe").forEach(t=>{const n=t.dataset.id;let e=t.document;t.contentDocument?e=t.contentDocument:t.contentWindow&&(e=t.contentWindow.document);const o=`<script type="text/javascript" src="${`https://gist.github.com/${n}.js`}"><\/script>`,s="<style>*{font-size:12px;}</style>",c=`onload="parent.document.getElementById('${`gist-${n}`}').style.height=document.body.scrollHeight + 'px'"`,d=`<html><head><base target="_parent">${s}</head><body ${c}>${o}</body></html>`;e.open(),e.writeln(d),e.close()})});</script><body class="astro-UV4PCJ7L max-w-3xl min-h-screen mx-auto px-6 sm:px-8"><header class="astro-NYKZJGFX"><a class="astro-NYKZJGFX unset -top-[100rem] absolute bg-white focus:top-[initial] left-[50%] px-8 py-2 text-black translate-x-[-50%] z-10"href="#main">Skip to content</a><nav class="astro-NYKZJGFX"><section class="astro-NYKZJGFX text-text-bold"><ul class="astro-NYKZJGFX unset [&>li]:p-0 flex gap-4"><li class="astro-NYKZJGFX"><a class="astro-NYKZJGFX unset animated-link"href="/">Home</a><li class="astro-NYKZJGFX"><a class="astro-NYKZJGFX unset animated-link show"href="/blog">Blog</a><li class="astro-NYKZJGFX"><a class="astro-NYKZJGFX unset animated-link"href="/projects">Projects</a></ul></section></nav><div class="astro-NYKZJGFX flex content-center items-center justify-self-end text-text-bold"><mode-toggle class="astro-JPTWJHQ3 flex"><button aria-checked="false"class="astro-JPTWJHQ3 rounded-full bg-black dark:bg-white h-6 inline-flex items-center justify-self-end ml-4 w-11"data-headlessui-state=""id="mode-toggle"role="switch"tabindex="0"type="button"><span class="astro-JPTWJHQ3 sr-only">Toggle dark mode</span><span class="astro-JPTWJHQ3 rounded-full bg-gradient-to-tr h-4 inline-block invisible light w-4"id="mode-circle"><span class="astro-JPTWJHQ3 rounded-full absolute bg-white h-[10px] right-0 scale-[0] top-0 w-[10px]"></span></span></button></mode-toggle><script>function updateHTMLTheme(e){var t=document.head.querySelector('meta[name="theme-color"]');"dark"===e?(document.documentElement.classList.remove("light"),document.documentElement.classList.add("dark"),t&&(t.content="#262626")):(document.documentElement.classList.remove("dark"),document.documentElement.classList.add("light"),t&&(t.content="#ffffff"))}function updateStorageTheme(e){"dark"===e?sessionStorage.setItem("theme","dark"):sessionStorage.setItem("theme","light")}class ModeToggle extends HTMLElement{constructor(){super(),this._currentMode=document.documentElement.classList.contains("dark")?"dark":"light"}connectedCallback(){var e=this.querySelector("button");let t=e?.querySelector("#mode-circle");t&&e&&("dark"===this._currentMode&&(t.classList.remove("light"),t.classList.add("dark")),t.classList.remove("invisible"),e.addEventListener("click",()=>{var e;"dark"===this._currentMode?(e="light",t.classList.remove("dark"),t.classList.add("light"),updateHTMLTheme(e),updateStorageTheme(e),this._currentMode=e):(e="dark",t.classList.remove("light"),t.classList.add("dark"),updateHTMLTheme(e),updateStorageTheme(e),this._currentMode=e),t.classList.contains("duration-300")||t.classList.add("duration-300")}))}}customElements.get("mode-toggle")||customElements.define("mode-toggle",ModeToggle)</script></div></header><main class="astro-UV4PCJ7L"id="main"><section class="astro-UV4PCJ7L blog-post max-w-none prose prose-newspaper"><h1 class="astro-UV4PCJ7L after:block after:border-b-[1px] after:border-current after:content-[''] after:h-[1px] after:mt-6 after:w-[100%] m-0 mb-[0.375em] pt-1">I Over-Engineered a SQL Query (And Almost Didn't Stop)</h1><time class="astro-UV4PCJ7L block mb-[2em] text-text-muted">Oct 28, 2025</time> <img alt="I Over-Engineered a SQL Query (And Almost Didn't Stop)"class="astro-UV4PCJ7L hero-image"fetchpriority="high"height="600"src="/images/Screenshot 2025-10-28 180350.webp"width="1200"><article><blockquote><p>You'd think it's obvious when you become the villain. You picture a maniacal laugh, a dramatic reveal. But in engineering, evil is boring. It just sounds like 'best practices' and 'scalability'.</blockquote><p>It started with a straightforward task: comparing two messy databases to see if they were syncing correctly. I was just going to write a SQL query. What could possibly go wrong?<p>At work, I'm part of the commercial team doing tech-related tasks- we have a separate IT department though, so it's not like I am doing development.<p>The databases were messy-different structures, same kind of data, but modeled in completely different ways. I chose Python and DuckDB for the job.<p>The data came from reports, so it was already unnormalized. My job was to match rows from each system and see if they aligned… straightforward and simple. I got to work: loaded the data, aligned the structures, built a mini data warehouse. So far, so good.<p>But then I started thinking-what if the column names change in the future? I should probably make this flexible. So I added a JSON file to parameterize the column names…<p>That was smart.<p>That was fine.<p>If I had stopped JSONing at that point, everything would have been okay, it was great JSONing up to that point.<p>But it didn't end there…<p>I realized something: I'd probably need to chain queries together. Some of the structures were repeating, and the logic varied.<p>So I thought, why not take this further? Instead of just executing a list of queries, I could create a JSON file that defines each query type and its parameters.<p>It felt… elegant.<p>It felt scalable.<p>It felt like I was building a powerful engine, not just a simple tool. I started solving problems I didn't have. I went with that idea-and I got it to work. Honestly, I'm pretty proud of it. For a while, it worked surprisingly well.<p>That is, until the next requirement arrived: comparing multiple parameters at once. This broke… pretty much everything. My elegant system only supported simple equality checks between two columns. It was never built for this.<p>And you can probably see where this is going.<p>So I started down the only path that seemed viable….<p>Writing a function that could dynamically generate the SQL query I needed, injecting parameters from the JSON.<p>It sounded clever.<p>It sounded scalable.<p>It sounded like I was building a house of cards.<p>So I started building the JSON parser. Like one does.  Started to get some errors on the screen like expected.<p>Fixed the first error, another one popped up. Fixed that one, changed the JSON, and it broke, fixed that too.<p>I hear a teams message sound: - Hey are you done with the query?<p>It was my boss, my thought starting to rush.<p>Can I tell him I am doing a querying system? - The voice in my mind said.<p>Hmmm I am not sure I can tell him that, he would not understand…<p>But why?<p>Hmmm… Because he wants results.<p>But that is what you are doing right? - My mind voiced asked.<p>Not right now, no. But once I get this working….<p>I see the clock I had been debugging for hours.<p>It became so painful it forced clarity. Staring at my mess of errors, I realized; I wasn't a visionary. I was an employee who thought he had too much time to spare but was actually on a schedule.<p>So I stepped back from the brink. I backed off.<p>I kept the simple JSON config for what it was good for-parameterizing column names-and for the complex comparison, I wrote a dedicated, straightforward SQL query. It was clear, it was robust, and it took me thirty minutes.<p>The lesson wasn't "never abstract." It was: know when to stop. Thirty minutes. The monster was just a SQL query all along. In the end, the real failure wasn't over-engineering - it was not knowing when to stop. My time-consuming 'scalable engine' was defeated by a thirty-minute SQL query.</article></section></main><footer class="astro-HEYBPPVE leading-[1.75] mt-4 text-sm"><div class="astro-HEYBPPVE">This blog is powered by <a class="unset astro-HEYBPPVE bg-clip-text bg-gradient-to-r font-bold from-[#00abda] gradient-link hover:after:bg-gradient-to-r hover:after:from-[#00abda] hover:after:to-[#1476ff] text-transparent to-[#1476ff] tracking-wider"href="https://astro.build"target="_blank">Astro</a> with the <a class="unset astro-HEYBPPVE bg-clip-text bg-gradient-to-r font-bold from-[#00abda] gradient-link hover:after:bg-gradient-to-r hover:after:from-[#00abda] hover:after:to-[#1476ff] text-transparent to-[#1476ff] tracking-wider"href="https://github.com/flexdinesh/blogster"target="_blank">Blogster Newspaper</a></div></footer>